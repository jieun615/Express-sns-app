<%- include('../partials/header') %>
<div class="container col-lg-8">

    <div class="mb-2">
        <div class="card">
            <h5 class="card-header text-start">친구 요청</h5>
            <div class="card-body">
                <% if (currentUser.friendsRequests.length === 0) { %>
                    <div class="card-text text-center ">
                        아직 친구 요청이 없습니다.
                    </div>
                <% } else { %>
                    <% currentUser.friendsRequests.forEach((friendId) => { %>
                        <% const friend = user.find(user => user._id.toString() === friendId) %>
                            <div class="card" style="border:none;">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <a href="/profile/<%= friendId %>">
                                            <p><%= friend.username %></p>
                                        </a>
                                        <div class="d-flex">
                                            <form action="/friends/<%= friend.id %>/accept-friend-request?_method=PUT" method="POST" class="me-3">
                                                <button class="btn btn-primary btn-sm" type="submit">친구 추가 요청 수락</button>
                                            </form>
                                            <form action="/friends/<%= friend.id %>/remove-friend-request?_method=PUT" method="POST">
                                                <button class="btn btn-primary btn-sm" type="submit">친구 추가 요청 거절</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    <% }) %>
                <% } %>
            </div>
        </div>

    </div>

</div>

<%- include('../partials/footer') %>